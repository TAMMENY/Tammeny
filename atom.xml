<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>唐文雍的个人网站</title>
  <subtitle>WEB前端工程师</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.tammeny.com/"/>
  <updated>2017-05-29T06:26:33.000Z</updated>
  <id>http://www.tammeny.com/</id>
  
  <author>
    <name>唐文雍</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Web前端收藏夹</title>
    <link href="http://www.tammeny.com/2017/05/29/Web%E5%89%8D%E7%AB%AF%E6%94%B6%E8%97%8F%E5%A4%B9/"/>
    <id>http://www.tammeny.com/2017/05/29/Web前端收藏夹/</id>
    <published>2017-05-29T05:47:44.000Z</published>
    <updated>2017-05-29T06:26:33.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="实用工具"><a href="#实用工具" class="headerlink" title="实用工具"></a>实用工具</h3><ol>
<li><a href="http://realfavicongenerator.net/" target="_blank" rel="external">RealFaviconGenerator</a>：favicon生成器，兼容所有平台的所有浏览器，只需上传png图片，就可以导出适用于各个平台的icon，同时生成对应的html。</li>
</ol>
<h3 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h3><h3 id="AngularJS"><a href="#AngularJS" class="headerlink" title="AngularJS"></a>AngularJS</h3><h3 id="ReactJS"><a href="#ReactJS" class="headerlink" title="ReactJS"></a>ReactJS</h3><h3 id="JQuery"><a href="#JQuery" class="headerlink" title="JQuery"></a>JQuery</h3><h3 id="NodeJS"><a href="#NodeJS" class="headerlink" title="NodeJS"></a>NodeJS</h3><h3 id="文章精选"><a href="#文章精选" class="headerlink" title="文章精选"></a>文章精选</h3><h3 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h3><ol>
<li><a href="http://xianbai.me/learn-md/index.html" target="_blank" rel="external">Markdown 入门参考</a></li>
<li><a href="http://es6.ruanyifeng.com/" target="_blank" rel="external">ECMAScript 6 入门</a>：《ECMAScript 6 入门》是一本开源的 JavaScript 语言教程，全面介绍 ECMAScript 6 新引入的语法特性，作者是阮一峰。</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;实用工具&quot;&gt;&lt;a href=&quot;#实用工具&quot; class=&quot;headerlink&quot; title=&quot;实用工具&quot;&gt;&lt;/a&gt;实用工具&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://realfavicongenerator.net/&quot; target=&quot;_blan
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>NodeJS简单实现一条爬虫</title>
    <link href="http://www.tammeny.com/2017/05/28/NodeJS%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0%E4%B8%80%E6%9D%A1%E7%88%AC%E8%99%AB/"/>
    <id>http://www.tammeny.com/2017/05/28/NodeJS简单实现一条爬虫/</id>
    <published>2017-05-28T15:56:28.000Z</published>
    <updated>2017-05-29T05:28:41.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="业务需求"><a href="#业务需求" class="headerlink" title="业务需求"></a>业务需求</h3><p>抓取豆瓣网站下热门的电影。</p>
<h3 id="依赖包介绍"><a href="#依赖包介绍" class="headerlink" title="依赖包介绍"></a>依赖包介绍</h3><ol>
<li>request：让http请求变得超级简单，同时支持https和重定向，用于发送请求获取网页内容；</li>
<li>cheerio：是一个很好的解析库，服务端版本的jquery，用于查找网页内容。</li>
</ol>
<h3 id="原理介绍"><a href="#原理介绍" class="headerlink" title="原理介绍"></a>原理介绍</h3><p>网络爬虫的实现原理很简单，其实就相当于我们浏览网页，本文的demo是通过nodejs的request模块发送http请求，加载目标网页，再通过cheerio查找想要的内容。</p>
<h3 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">npm init Crawler</div><div class="line">npm install request --save</div><div class="line">npm install cheerio --save</div></pre></td></tr></table></figure>
<p>在项目根目录新建index.js并插入以下代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">var request = require(&apos;request&apos;);</div><div class="line">var cheerio = require(&apos;cheerio&apos;);</div><div class="line"></div><div class="line">//获取热门电影</div><div class="line">function getHotMovie(url)&#123;</div><div class="line">	request(url, function(err, response, body) &#123;</div><div class="line">        if (!err &amp;&amp; response.statusCode == 200) &#123;</div><div class="line">            $ = cheerio.load(body);</div><div class="line">            var content = $(&quot;.ui-slide-content li.ui-slide-item&quot;);   //获取电影列表DOM</div><div class="line">            var length = content.length;</div><div class="line">            var list = [];</div><div class="line">            while (length --) &#123;</div><div class="line">            	var title = $(content[length]).data(&quot;title&quot;);   //获取电影名称</div><div class="line">                title &amp;&amp; list.push(title);</div><div class="line">            &#125;</div><div class="line">            console.info(&quot;热门电影有：&quot;, list);</div><div class="line">        &#125;else&#123;</div><div class="line">            console.info(&quot;网页加载失败：&quot;, err);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line">getHotMovie(&quot;https://movie.douban.com/&quot;);</div></pre></td></tr></table></figure></p>
<h3 id="开始抓取"><a href="#开始抓取" class="headerlink" title="开始抓取"></a>开始抓取</h3><p>运行<code>node index.js</code>开始抓取内容，最终获得以下结果：<br><img src="/2017/05/28/NodeJS简单实现一条爬虫/crawler.png" alt="NodeJS简单实现一条爬虫运行结果" title="NodeJS简单实现一条爬虫运行结果"></p>
<h3 id="问答"><a href="#问答" class="headerlink" title="问答"></a>问答</h3><ol>
<li>如何应对反爬虫策略？<br>如伪造浏览器header，使用代理ip，限制规定时间内请求次数等。</li>
<li>如何读写excel？<ul>
<li>node-xlsx: 基于Node.js解析excel文件数据及生成excel文件，仅支持xlsx格式文件；</li>
<li>excel-parser: 基于Node.js解析excel文件数据，支持xls及xlsx格式文件；</li>
<li>excel-export : 基于Node.js将数据生成导出excel文件，生成文件格式为xlsx；</li>
<li>node-xlrd: 基于node.js从excel文件中提取数据，仅支持xls格式文件；</li>
<li>js-xlsx: 是目前Github上star数量最多的处理Excel的库，功能强大，但上手难度稍大。</li>
</ul>
</li>
<li>如何抓取分页数据？<br>分析前几页链接的变化规律，通常url后面会有个数字递增，这就是页码了。</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;业务需求&quot;&gt;&lt;a href=&quot;#业务需求&quot; class=&quot;headerlink&quot; title=&quot;业务需求&quot;&gt;&lt;/a&gt;业务需求&lt;/h3&gt;&lt;p&gt;抓取豆瓣网站下热门的电影。&lt;/p&gt;
&lt;h3 id=&quot;依赖包介绍&quot;&gt;&lt;a href=&quot;#依赖包介绍&quot; class=&quot;heade
    
    </summary>
    
    
      <category term="nodejs" scheme="http://www.tammeny.com/tags/nodejs/"/>
    
  </entry>
  
  <entry>
    <title>我是如何实现H5唤起APP的</title>
    <link href="http://www.tammeny.com/2017/05/14/%E6%88%91%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0H5%E5%94%A4%E8%B5%B7APP%E7%9A%84/"/>
    <id>http://www.tammeny.com/2017/05/14/我是如何实现H5唤起APP的/</id>
    <published>2017-05-14T08:59:47.000Z</published>
    <updated>2017-05-15T13:45:40.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="业务需求"><a href="#业务需求" class="headerlink" title="业务需求"></a>业务需求</h4><p>在外部应用浏览H5页面，点页面的“打开APP”按钮，如有安装APP，就唤起，否则跳转到下载页面。</p>
<h4 id="唤起的原理"><a href="#唤起的原理" class="headerlink" title="唤起的原理"></a>唤起的原理</h4><p>浏览器通过Url Scheme打开APP，像普通的url链接一样，通过a标签或者location.href打开即可唤起APP。</p>
<h4 id="局限"><a href="#局限" class="headerlink" title="局限"></a>局限</h4><ol>
<li>APP未使用深度链接，微信、微博等其他社交软件无法直接唤起APP，只能通过浏览器唤起；</li>
<li>JS无法准确判断本地是否安装了APP；</li>
<li>部分浏览器不支持唤起；<br>…</li>
</ol>
<h4 id="微信中唤起"><a href="#微信中唤起" class="headerlink" title="微信中唤起"></a>微信中唤起</h4><p>微信上禁用了唤起APP接口，无法直接唤起APP，常规的做法是引导用户使用普通浏览器打开H5页面。但如果APP使用了深度链接，可以直接在各种APP之间跳转，包括微信、微博、普通浏览器。</p>
<h4 id="浏览器唤起"><a href="#浏览器唤起" class="headerlink" title="浏览器唤起"></a>浏览器唤起</h4><p>大多数普通浏览器可以通过以下方式直接唤起<br><code>window.location.href = scheme</code>或者<code>&lt;a href=&quot;scheme&quot;&gt;打开APP&lt;/a&gt;</code></p>
<h4 id="我的兼容方案"><a href="#我的兼容方案" class="headerlink" title="我的兼容方案"></a>我的兼容方案</h4><p>JS无法判断某个APP是否有安装，网上很多方案是通过计算时间差，但很不稳定。我的兼容方案是：无论客户端有无安装APP，无论浏览器兼容与否，当用户点击“打开APP”时，通过<code>window.location.href = scheme</code>尝试唤起APP，同时3秒之后打开下载页面。</p>
<h4 id="后续"><a href="#后续" class="headerlink" title="后续"></a>后续</h4><p>没有完美的方案，大家根据自己实际业务需求进行调整，灵活应用。下一篇文章我会贴出具体代码，并做成JS插件，敬请期待。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;业务需求&quot;&gt;&lt;a href=&quot;#业务需求&quot; class=&quot;headerlink&quot; title=&quot;业务需求&quot;&gt;&lt;/a&gt;业务需求&lt;/h4&gt;&lt;p&gt;在外部应用浏览H5页面，点页面的“打开APP”按钮，如有安装APP，就唤起，否则跳转到下载页面。&lt;/p&gt;
&lt;h4 id=&quot;唤
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://www.tammeny.com/2016/07/14/hello-world/"/>
    <id>http://www.tammeny.com/2016/07/14/hello-world/</id>
    <published>2016-07-14T12:31:27.000Z</published>
    <updated>2016-07-14T12:31:27.000Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
    
    </summary>
    
    
  </entry>
  
</feed>
